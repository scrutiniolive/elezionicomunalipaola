import{a as I,b as k}from"./chunk-ZBWDBKSD.js";import{a as E}from"./chunk-VV2EH4JZ.js";import{c as u,e as f,j as S,k as v,l as w,o as D}from"./chunk-32MEKWXN.js";import{$b as z,Ba as p,Ga as h,Ka as C,Kb as b,Ob as x,Ra as r,Ua as a,Va as o,Wa as i,_a as _,_b as y,eb as s,hb as O,jb as M,kb as P,lb as m,xa as c}from"./chunk-EKZ7NG4P.js";function R(d,n){if(d&1&&(a(0,"option",16),s(1),o()),d&2){let e=n.$implicit;r("value",e.id),c(),O(" S",e.id,"-",e.name," ")}}var N=class d{constructor(n,e){this.dashboardControllerService=n;this.electionDisplayControllerService=e}liveState="-";party="-";votes="-";sections=[];selectedSection=-1;selectedSectionData=null;updateSubscription;ngOnInit(){this.loadSections()}loadSections(){this.electionDisplayControllerService.allSectionInfo().subscribe({next:n=>{this.sections=this.mapSectionDtoToSectionData(n),this.sections.length>0&&(this.sections.sort((e,t)=>{let l=e.id??0,g=t.id??0;return l-g}),this.selectedSection=this.sections[0].id,this.onSectionChange())},error:n=>console.error("Errore nel caricamento delle sezioni:",n)})}mapSectionDtoToSectionData(n){return n.map(e=>({id:e.id||0,name:e.name||"",state:e.ballotOpen?"Aperto":"Chiuso",votes:"-"}))}onSectionChange(){this.selectedSection?this.dashboardControllerService.globalSectionStats1(this.selectedSection).subscribe({next:n=>{this.selectedSectionData={id:n.sectionId,name:n.sectionName||"",state:n.ballotOpen?"Aperto":"Chiuso",votes:((n.totalVotes??0)-(n.blanks??0)-(n.nulls??0)).toString()}},error:n=>console.error("Errore nel caricamento dei dettagli sezione:",n)}):this.selectedSectionData=null}ngOnDestroy(){this.updateSubscription&&this.updateSubscription.unsubscribe()}static \u0275fac=function(e){return new(e||d)(p(y),p(z))};static \u0275cmp=h({type:d,selectors:[["app-seat-results"]],decls:24,vars:13,consts:[[1,"dashboard"],[1,"card-container"],[1,"selector-card"],[1,"icon"],[1,"fa-solid","fa-person-booth"],[1,"content"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"title","value","icon","prefix"],[1,"chart-container"],[1,"chart-row"],[1,"chart-col"],["dataSource","seat-mayors","title","Distribuzione Voti Sindaco",3,"sectionId"],["dataSource","seat-councillors",3,"sectionId"],["dataSource","seat-votes","title","Distribuzione Schede Elettorali",3,"sectionId"],[3,"value"]],template:function(e,t){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i(4,"i",4),o(),a(5,"div",5)(6,"h3"),s(7,"Seleziona Sezione"),o(),a(8,"select",6),m("ngModelChange",function(g){return P(t.selectedSection,g)||(t.selectedSection=g),g}),_("change",function(){return t.onSectionChange()}),a(9,"option",7),s(10,"Tutte le sezioni"),o(),C(11,R,2,3,"option",8),o()()(),i(12,"app-counter-card",9)(13,"app-counter-card",9),o(),a(14,"div",10)(15,"div",11)(16,"div",12),i(17,"app-pie-chart",13),o()(),a(18,"div",11)(19,"div",12),i(20,"app-bar-chart",14),o()(),a(21,"div",11)(22,"div",12),i(23,"app-pie-chart",15),o()()()()),e&2&&(c(8),M("ngModel",t.selectedSection),c(3),r("ngForOf",t.sections),c(),r("title","Stato Seggio")("value",(t.selectedSectionData==null?null:t.selectedSectionData.state)||t.liveState)("icon","tower-broadcast")("prefix",""),c(),r("title","Votanti")("value",(t.selectedSectionData==null?null:t.selectedSectionData.votes)||t.votes)("icon","pencil")("prefix",""),c(4),r("sectionId",t.selectedSectionData==null?null:t.selectedSectionData.id),c(3),r("sectionId",t.selectedSectionData==null?null:t.selectedSectionData.id),c(3),r("sectionId",t.selectedSectionData==null?null:t.selectedSectionData.id))},dependencies:[x,b,D,v,w,S,u,f,E,I,k],styles:[".dashboard[_ngcontent-%COMP%]{padding:15px;overflow-x:hidden}.dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:20px;color:#2c3e50}.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:30px}.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{height:92px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a;padding:20px;display:flex;align-items:center;box-sizing:border-box}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px;margin-right:11px;flex-shrink:0}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#7f8c8d;font-size:16px;font-weight:500}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;border-radius:4px;border:1px solid #ddd;font-size:16px;color:#2c3e50;background-color:#f8f9fa;cursor:pointer}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px #3498db33}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#3498db}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{flex:1;background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a;padding:20px;min-height:300px}[_nghost-%COMP%]{display:block;height:100%}[_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a;padding:20px;display:flex;align-items:center;height:100%;box-sizing:border-box}[_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px;margin-right:11px;flex-shrink:0}[_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#7f8c8d;font-size:16px;font-weight:500}[_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin:5px 0 0;color:#2c3e50}@media (min-width: 1201px){.dashboard[_ngcontent-%COMP%]{padding:20px}.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{margin-bottom:35px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{padding:25px;min-height:400px}.dashboard[_ngcontent-%COMP%]   .counter-card[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]{padding:22px}}@media (min-width: 769px) and (max-width: 1200px){.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:15px;margin-bottom:25px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{min-height:350px;max-height:none;width:100%}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:45px;height:45px;font-size:22px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:22px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:15px;padding:7px}}@media (max-width: 768px){.dashboard[_ngcontent-%COMP%]{padding:12px}.dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:22px;margin-bottom:15px}.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px;margin-bottom:20px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]{flex-direction:column;gap:15px;margin-bottom:15px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{padding:15px;min-height:350px;height:auto;width:100%}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:42px;height:42px;font-size:20px;margin-right:10px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px;margin-bottom:6px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:20px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:14px;padding:6px}}@media (max-width: 480px){.dashboard[_ngcontent-%COMP%]{padding:10px}.dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;margin-bottom:12px}.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{gap:10px;margin-bottom:15px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]{gap:12px;margin-bottom:12px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{padding:12px;min-height:260px;height:auto}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]{padding:12px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:38px;height:38px;font-size:18px;margin-right:8px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:13px;margin-bottom:5px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:18px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:13px;padding:5px}}@media (max-width: 360px){.dashboard[_ngcontent-%COMP%]{padding:8px}.dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{gap:8px;margin-bottom:12px}.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{height:80px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]{gap:10px;margin-bottom:10px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{padding:10px;min-height:220px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]{padding:10px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:32px;height:32px;font-size:16px;margin-right:6px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:11px;margin-bottom:3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:16px}.dashboard[_ngcontent-%COMP%]   .selector-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .dashboard   [_nghost-%COMP%]   .counter-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:11px;padding:4px;height:26px}}  .chart-col app-pie-chart,   .chart-col app-bar-chart{display:block;width:100%;height:100%;min-height:inherit;overflow:visible}  .chart-col svg{width:100%!important;height:100%!important;max-height:none!important}@media (max-width: 480px){  .chart-col svg{overflow:visible!important}  .chart-col .chart-legends{flex-wrap:wrap;justify-content:center;font-size:12px}}@media (max-width: 360px){  .chart-col .chart-legends{font-size:10px;line-height:1.2;padding:8px 4px}  .chart-col .chart-legend-color{width:10px;height:10px;margin-right:3px}  .chart-col .chart-legend-item{margin-right:5px;margin-bottom:3px}}"]})};export{N as SeatResultsComponent};
