import{a as u,b as g,c as b}from"./chunk-XHZ73YMA.js";import{Aa as p,Fa as l,Ib as m,Qa as r,Ta as o,Ua as n,Ub as h,Va as i,v as s,wa as e}from"./chunk-FTSSXSA7.js";var v=class d{constructor(t){this.dashboardControllerService=t}liveState="-";numSection="-";party="-";votes="-";updateSubscription;ngOnInit(){this.loadAllData(),this.setupAutoRefresh()}loadAllData(){this.dashboardControllerService.globalStats().subscribe({next:t=>{this.liveState=t.countingInProgress?"In Diretta":"Terminato",this.numSection=t.sectionClosed?(17-t.sectionClosed).toString()+" di 17":"-",this.party=t.leadPartyList?t.leadPartyList:"-",this.votes=t.totalVotes?t.totalVotes.toString():"-"},error:t=>console.error("Errore nel caricamento dei dati:",t)})}setupAutoRefresh(){this.updateSubscription=s(3e5).subscribe(()=>{this.loadAllData()})}ngOnDestroy(){this.updateSubscription&&this.updateSubscription.unsubscribe()}static \u0275fac=function(a){return new(a||d)(p(h))};static \u0275cmp=l({type:d,selectors:[["app-dashboard"]],decls:15,vars:16,consts:[[1,"dashboard"],[1,"card-container"],[3,"title","value","icon","prefix"],[1,"chart-container"],[1,"chart-row"],[1,"chart-col"],["dataSource","mayors","title","Voti Candidati a Sindaco"],["dataSource","votes","title","Schede Elettorali"],["dataSource","dashboard"]],template:function(a,c){a&1&&(o(0,"div",0)(1,"div",1),i(2,"app-counter-card",2)(3,"app-counter-card",2)(4,"app-counter-card",2)(5,"app-counter-card",2),n(),o(6,"div",3)(7,"div",4)(8,"div",5),i(9,"app-pie-chart",6),n(),o(10,"div",5),i(11,"app-pie-chart",7),n()(),o(12,"div",4)(13,"div",5),i(14,"app-bar-chart",8),n()()()()),a&2&&(e(2),r("title","Stato Scrutinio")("value",c.liveState)("icon","tower-broadcast")("prefix",""),e(),r("title","Votanti")("value",c.votes)("icon","pencil")("prefix",""),e(),r("title","Partito in Vantaggio")("value",c.party)("icon","landmark")("prefix",""),e(),r("title","Seggi Attivi")("value",c.numSection)("icon","person-booth")("prefix",""))},dependencies:[m,u,g,b],styles:[".dashboard[_ngcontent-%COMP%]{padding:1rem;font-family:sans-serif}.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-bottom:1.5rem}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1rem}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{flex:1 1 300px;background-color:#fff;border-radius:.5rem;box-shadow:0 2px 10px #0000001a;padding:1rem;box-sizing:border-box;min-width:0}@media (max-width: 768px){.dashboard[_ngcontent-%COMP%]{padding:.75rem}.card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:.75rem;margin-bottom:1rem}.chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{flex:1 1 100%;padding:.75rem}}"]})};export{v as DashboardComponent};
