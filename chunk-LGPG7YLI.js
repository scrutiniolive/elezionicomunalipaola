import{a as u,b as v,c as g}from"./chunk-WS5Q7ZN2.js";import{Aa as s,Fa as l,Ib as m,Qa as o,Ta as r,Ua as n,Ub as h,Va as i,v as d,wa as e}from"./chunk-FTSSXSA7.js";var b=class p{constructor(t){this.dashboardControllerService=t}liveState="-";numSection="-";party="-";votes="-";updateSubscription;ngOnInit(){this.loadAllData(),this.setupAutoRefresh()}loadAllData(){this.dashboardControllerService.globalStats().subscribe({next:t=>{this.liveState=t.countingInProgress?"In Diretta":"Terminato",this.numSection=t.sectionClosed?(17-t.sectionClosed).toString()+" di 17":"-",this.party=t.leadPartyList?t.leadPartyList:"-",this.votes=t.totalVotes?t.totalVotes.toString():"-"},error:t=>console.error("Errore nel caricamento dei dati:",t)})}setupAutoRefresh(){this.updateSubscription=d(3e5).subscribe(()=>{this.loadAllData()})}ngOnDestroy(){this.updateSubscription&&this.updateSubscription.unsubscribe()}static \u0275fac=function(a){return new(a||p)(s(h))};static \u0275cmp=l({type:p,selectors:[["app-dashboard"]],decls:15,vars:16,consts:[[1,"dashboard"],[1,"card-container"],[3,"title","value","icon","prefix"],[1,"chart-container"],[1,"chart-row"],[1,"chart-col"],["dataSource","mayors","title","Voti Candidati a Sindaco"],["dataSource","votes","title","Schede Elettorali"],["dataSource","dashboard"]],template:function(a,c){a&1&&(r(0,"div",0)(1,"div",1),i(2,"app-counter-card",2)(3,"app-counter-card",2)(4,"app-counter-card",2)(5,"app-counter-card",2),n(),r(6,"div",3)(7,"div",4)(8,"div",5),i(9,"app-pie-chart",6),n(),r(10,"div",5),i(11,"app-pie-chart",7),n()(),r(12,"div",4)(13,"div",5),i(14,"app-bar-chart",8),n()()()()),a&2&&(e(2),o("title","Stato Scrutinio")("value",c.liveState)("icon","tower-broadcast")("prefix",""),e(),o("title","Votanti")("value",c.votes)("icon","pencil")("prefix",""),e(),o("title","Partito in Vantaggio")("value",c.party)("icon","landmark")("prefix",""),e(),o("title","Seggi Attivi")("value",c.numSection)("icon","person-booth")("prefix",""))},dependencies:[m,u,v,g],styles:[".dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:20px;color:#2c3e50}.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:30px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{flex:1;background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a;padding:20px}@media (max-width: 1200px){.card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.chart-row[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 768px){.card-container[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{b as DashboardComponent};
