import{K as a,N as r,S as c,Xb as s,h as n}from"./chunk-YCY2TLIR.js";var l=class o{constructor(i){this.authControllerService=i;this.isAuthenticatedSubject.next(this.hasToken()),this.isAdminAuthenticatedSubject.next(this.isAdmin())}isAuthenticatedSubject=new n(this.hasToken());isAuthenticated$=this.isAuthenticatedSubject.asObservable();isAdminAuthenticatedSubject=new n(this.hasToken());isAdminAuthenticated$=this.isAdminAuthenticatedSubject.asObservable();login(i,t){let u={username:i,password:t};return this.authControllerService.login(u).pipe(a(e=>{e&&e.token&&(localStorage.setItem("auth_token",e.token),localStorage.setItem("userSectionId",e.section?e.section.toString():""),localStorage.setItem("isAdmin",e.isAdmin?"true":"false"),this.isAuthenticatedSubject.next(!0),this.isAdminAuthenticatedSubject.next(!0))}))}switchSection(i){return this.authControllerService.changeSection(i).pipe(a(t=>{t&&t.token&&(localStorage.setItem("auth_token",t.token),localStorage.setItem("userSectionId",t.section?t.section.toString():""),localStorage.setItem("isAdmin",t.isAdmin?"true":"false"),this.isAuthenticatedSubject.next(!0),this.isAdminAuthenticatedSubject.next(!0))}))}logout(){localStorage.removeItem("auth_token"),localStorage.removeItem("userSectionId"),localStorage.removeItem("isAdmin"),this.isAuthenticatedSubject.next(!1)}getToken(){return localStorage.getItem("auth_token")}hasToken(){return!!this.getToken()}isAdmin(){return localStorage.getItem("isAdmin")?!!localStorage.getItem("isAdmin"):!1}isAuthenticated(){return this.hasToken()}static \u0275fac=function(t){return new(t||o)(c(s))};static \u0275prov=r({token:o,factory:o.\u0275fac,providedIn:"root"})};export{l as a};
