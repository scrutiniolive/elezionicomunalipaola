import{K as n,N as a,S as c,Yb as u,h as r}from"./chunk-WE42TLE3.js";var l=class i{constructor(e){this.authControllerService=e;this.isAuthenticatedSubject.next(this.hasToken())}isAuthenticatedSubject=new r(this.hasToken());isAuthenticated$=this.isAuthenticatedSubject.asObservable();login(e,t){let s={username:e,password:t};return this.authControllerService.login(s).pipe(n(o=>{o&&o.token&&(localStorage.setItem("auth_token",o.token),this.isAuthenticatedSubject.next(!0))}))}switchSection(e){return this.authControllerService.changeSection(e).pipe(n(t=>{t&&t.token&&(localStorage.setItem("auth_token",t.token),localStorage.setItem("userSectionId",t.section?t.section.toString():""),this.isAuthenticatedSubject.next(!0))}))}logout(){localStorage.removeItem("auth_token"),this.isAuthenticatedSubject.next(!1)}getToken(){return localStorage.getItem("auth_token")}hasToken(){return!!this.getToken()}isAuthenticated(){return this.hasToken()}static \u0275fac=function(t){return new(t||i)(c(u))};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})};export{l as a};
