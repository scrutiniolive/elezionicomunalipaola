import{a as g,b as C,c as u}from"./chunk-IQV3BIWR.js";import{Aa as s,Fa as l,Ib as m,Qa as n,Ta as o,Ua as r,Ub as h,Va as a,v as p,wa as e}from"./chunk-FTSSXSA7.js";var b=class d{constructor(t){this.dashboardControllerService=t}liveState="-";numSection="-";party="-";votes="-";updateSubscription;ngOnInit(){this.loadAllData(),this.setupAutoRefresh()}loadAllData(){this.dashboardControllerService.globalStats().subscribe({next:t=>{this.liveState=t.countingInProgress?"In Diretta":"Terminato",this.numSection=t.sectionClosed?(17-t.sectionClosed).toString()+" di 17":"-",this.party=t.leadPartyList?t.leadPartyList:"-",this.votes=t.totalVotes?t.totalVotes.toString():"-"},error:t=>console.error("Errore nel caricamento dei dati:",t)})}setupAutoRefresh(){this.updateSubscription=p(3e5).subscribe(()=>{this.loadAllData()})}ngOnDestroy(){this.updateSubscription&&this.updateSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||d)(s(h))};static \u0275cmp=l({type:d,selectors:[["app-dashboard"]],decls:15,vars:16,consts:[[1,"dashboard"],[1,"card-container"],[3,"title","value","icon","prefix"],[1,"chart-container"],[1,"chart-row"],[1,"chart-col"],["dataSource","mayors","title","Voti Candidati a Sindaco"],["dataSource","votes","title","Schede Elettorali"],["dataSource","dashboard"]],template:function(i,c){i&1&&(o(0,"div",0)(1,"div",1),a(2,"app-counter-card",2)(3,"app-counter-card",2)(4,"app-counter-card",2)(5,"app-counter-card",2),r(),o(6,"div",3)(7,"div",4)(8,"div",5),a(9,"app-pie-chart",6),r(),o(10,"div",5),a(11,"app-pie-chart",7),r()(),o(12,"div",4)(13,"div",5),a(14,"app-bar-chart",8),r()()()()),i&2&&(e(2),n("title","Stato Scrutinio")("value",c.liveState)("icon","tower-broadcast")("prefix",""),e(),n("title","Votanti")("value",c.votes)("icon","pencil")("prefix",""),e(),n("title","Partito in Vantaggio")("value",c.party)("icon","landmark")("prefix",""),e(),n("title","Seggi Attivi")("value",c.numSection)("icon","person-booth")("prefix",""))},dependencies:[m,g,C,u],styles:[".dashboard[_ngcontent-%COMP%]{padding:15px;width:100%;max-width:100%;overflow-x:hidden}.dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:20px;color:#2c3e50}.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:30px;width:100%}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{width:100%}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px;width:100%;flex-wrap:wrap}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{flex:1;min-width:250px;background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a;padding:15px;width:100%}@media (max-width: 1200px){.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]{flex-direction:column}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{width:100%}}@media (max-width: 768px){.dashboard[_ngcontent-%COMP%]{padding:10px}.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]{gap:15px}}"]})};export{b as DashboardComponent};
