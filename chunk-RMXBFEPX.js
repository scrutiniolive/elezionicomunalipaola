import{a as l,b as C,c as O}from"./chunk-KNXTRMCC.js";import{Ba as s,Ga as g,Jb as h,Ra as o,Ua as e,Va as a,Vb as m,Wa as r,v as p,xa as n}from"./chunk-SMHOL6ZH.js";var P=class d{constructor(t){this.dashboardControllerService=t}liveState="-";numSection="-";party="-";votes="-";updateSubscription;ngOnInit(){this.loadAllData(),this.setupAutoRefresh()}loadAllData(){this.dashboardControllerService.globalStats().subscribe({next:t=>{this.liveState=t.countingInProgress?"In Diretta":"Terminato",this.numSection=t.sectionClosed?(17-t.sectionClosed).toString()+" di 17":"-",this.party=t.leadPartyList?t.leadPartyList:"-",this.votes=t.totalVotes?t.totalVotes.toString():"-"},error:t=>console.error("Errore nel caricamento dei dati:",t)})}setupAutoRefresh(){this.updateSubscription=p(3e5).subscribe(()=>{this.loadAllData()})}ngOnDestroy(){this.updateSubscription&&this.updateSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||d)(s(m))};static \u0275cmp=g({type:d,selectors:[["app-dashboard"]],decls:15,vars:16,consts:[[1,"dashboard"],[1,"card-container"],[3,"title","value","icon","prefix"],[1,"chart-container"],[1,"chart-row"],[1,"chart-col"],["dataSource","mayors","title","Voti Candidati a Sindaco"],["dataSource","votes","title","Schede Elettorali"],["dataSource","dashboard"]],template:function(i,c){i&1&&(e(0,"div",0)(1,"div",1),r(2,"app-counter-card",2)(3,"app-counter-card",2)(4,"app-counter-card",2)(5,"app-counter-card",2),a(),e(6,"div",3)(7,"div",4)(8,"div",5),r(9,"app-pie-chart",6),a(),e(10,"div",5),r(11,"app-pie-chart",7),a()(),e(12,"div",4)(13,"div",5),r(14,"app-bar-chart",8),a()()()()),i&2&&(n(2),o("title","Stato Scrutinio")("value",c.liveState)("icon","tower-broadcast")("prefix",""),n(),o("title","Votanti")("value",c.votes)("icon","pencil")("prefix",""),n(),o("title","Partito in Vantaggio")("value",c.party)("icon","landmark")("prefix",""),n(),o("title","Seggi Attivi")("value",c.numSection)("icon","person-booth")("prefix",""))},dependencies:[h,l,C,O],styles:[".dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:20px;color:#2c3e50;font-size:24px}.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:30px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{flex:1;background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a;padding:20px;min-height:350px;height:auto}@media (max-width: 1200px){.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]{flex-direction:column}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{min-height:300px}}@media (max-width: 768px){.dashboard[_ngcontent-%COMP%]{padding:12px}.dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:22px;margin-bottom:15px}.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px;margin-bottom:20px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]{gap:15px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{padding:15px;min-height:280px}}@media (max-width: 480px){.dashboard[_ngcontent-%COMP%]{padding:10px}.dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;margin-bottom:12px}.dashboard[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{gap:12px;margin-bottom:15px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]{gap:12px;margin-bottom:12px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{padding:12px;min-height:250px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]     canvas{max-height:220px!important;width:100%!important}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]     .chart-legend{font-size:10px}}@media (max-width: 400px){.dashboard[_ngcontent-%COMP%]{padding:8px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]{padding:10px;min-height:220px}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]     canvas{max-height:180px!important}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]     h3{font-size:14px!important;margin-bottom:8px!important}.dashboard[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-row[_ngcontent-%COMP%]   .chart-col[_ngcontent-%COMP%]     .chart-js-legend{position:relative!important;top:auto!important;right:auto!important;margin-top:8px!important;text-align:center!important}}"]})};export{P as DashboardComponent};
